var flowSVG=function(){function n(a){return a.polygon("0,0 "+d.arrowHeadHeight+",0 "+d.arrowHeadHeight/2+","+d.arrowHeadHeight).fill({color:d.arrowHeadColor,opacity:d.arrowHeadOpacity}).cx(d.arrowHeadHeight/2).cy(d.arrowHeadHeight/2)}function H(){var a=m.group(),b=n(a).move(-(d.arrowHeadHeight/2),d.connectorLength-d.arrowHeadHeight),c=m.line(0,0,0,d.connectorLength-d.arrowHeadHeight).attr({"stroke-width":d.connectorStrokeWidth,stroke:d.connectorStrokeColour});a.add(c).add(b);return a}function q(a,
b){var c=b.group(),e=c.rect(d.labelWidth,d.labelHeight).radius(d.labelRadius).stroke({width:d.labelStroke}).attr({opacity:d.labelOpacity,fill:d.labelFill});e.move(-(d.labelWidth/2),d.labelHeight/2);c.text(a).attr({fill:d.labelTextColour,"text-anchor":"middle","font-size":d.labelFontSize}).cy(e.cy());return c}function I(a){var b,c=m.group().attr({"class":"fc-start"});var e=c.rect(d.startWidth,d.startHeight).attr({fill:d.startFill,"stroke-width":d.startStrokeWidth,stroke:d.startStrokeWidth}).radius(d.startCornerRadius);
C=c.attr("id");y=H();var g=c.text(function(a){a.tspan(d.startText).newLine().attr({"text-anchor":"middle","font-size":d.startFontSize,fill:d.startTextColour})});e=e.bbox();y.move(e.cx,e.height);g.move(e.cx);g.cy(e.cy);c.add(y);!0===l&&(c.attr({cursor:"pointer"}),c.click(function(){var c=a[0].svgid;if(!1===a[0].show)a[0].show=!0,c.animate().opacity(d.maxOpacity),c.attr("visibility","visible");else{c.animate().opacity(d.minOpacity);c.attr("visibility","hidden");a[0].show=!1;for(b=0;b<k.length;b+=1)a[h[k[b]]].svgid.animate().opacity(d.minOpacity),
a[h[k[b]]].show=!1,a[h[k[b]]].svgid.attr("visibility","hidden");k.splice(0,k.length-1)}}));return c}function z(a){m=a;r=m.group()}function K(){var a=m.group().attr({cursor:"pointer"}),b=(d.startWidth-5)/2,c=a.rect(b,d.btnBarHeight).fill(d.startFill).radius(d.btnBarRadius);a.text("Interactive").attr({fill:d.startTextColour,"font-size":d.btnBarFontSize,"pointer-events":"none"}).cy(d.btnBarHeight/2).cx(b/2);var e=a.rect(b,d.btnBarHeight).fill(d.startFill).radius(d.btnBarRadius).move(b+5,0);a.text("Static").attr({fill:d.startTextColour,
"font-size":d.btnBarFontSize,"pointer-events":"none"}).cy(d.btnBarHeight/2).cx(1.5*b+5);!0===l&&c.fill(d.btnBarSelectedColour);!1===l&&e.fill(d.btnBarSelectedColour);var J=c.attr("fill");var f=e.attr("fill");c.on("mouseover",function(){c.fill({color:d.btnBarHoverColour})}).on("mouseout",function(){c.fill({color:J})}).on("click",function(){l=!0;c.fill(d.btnBarSelectedColour);e.fill(d.startFill);m.clear();l=!0;z(m);A(g)}).on("mousedown",function(){c.fill(d.btnBarSelectedColour)});e.on("mouseover",function(){e.fill({color:d.btnBarHoverColour})}).on("mouseout",
function(){e.fill({color:f})}).on("click",function(){l=!1;e.fill(d.btnBarSelectedColour);c.fill(d.startFill);m.clear();l=!1;z(m);A(g)}).on("mousedown",function(){e.fill(d.btnBarSelectedColour)});return a}function L(a,b){if(a.type&&"function"===typeof D[a.type]){var c=D[a.type](a);a.id=c.attr("id");a.svgid=c;a.svgshape=c.get(0);p[a.label]=a.id;!1===l?(a.show=!0,c.opacity(d.maxOpacity)):(a.show=!1,c.attr("visibility","hidden"),c.opacity(d.minOpacity))}else return console.log(a.type+" is not a valid shape."),
!1}function M(a){a.yes&&(a.yesid=p[a.yes],a.svgyesid=SVG.get(p[a.yes]));a.no&&(a.noid=p[a.no],a.svgnoid=SVG.get(p[a.no]));a.next&&(a.nextid=p[a.next],a.svgnextid=SVG.get(p[a.next]))}function N(a){a.orient||(a.orient={yes:"b",no:"r",next:"b"});if(a.yes){var b=h[a.yes];g[b]&&!g[b].referredTo&&(g[b].previd=a.id,g[b].prev=a.label,g[b].svgprevid=SVG.get(a.id),"b"===a.orient.yes&&(g[b].isBelow=a.id,g[b].svgisBelow=SVG.get(a.id)),"r"===a.orient.yes&&(g[b].isRightOf=a.id,g[b].svgisRightOf=SVG.get(a.id)),
g[b].referredTo=!0)}a.no&&(b=h[a.no],g[b]&&!g[b].referredTo&&(g[b].previd=a.id,g[b].prev=a.label,g[b].svgprevid=SVG.get(a.id),"b"===a.orient.no&&(g[b].isBelow=a.id,g[b].svgisBelow=SVG.get(a.id)),"r"===a.orient.no&&(g[b].isRightOf=a.id,g[b].svgisRightOf=SVG.get(a.id)),g[b].referredTo=!0));a.next&&(b=h[a.next],g[b]&&!g[b].referredTo&&(g[b].previd=a.id,g[b].prev=a.label,g[b].svgprevid=SVG.get(a.id),"b"===a.orient.next&&(g[b].isBelow=a.id,g[b].svgisBelow=SVG.get(a.id)),"r"===a.orient.next&&(g[b].isRightOf=
a.id,g[b].svgisRightOf=SVG.get(a.id)),"l"===a.orient.next&&(g[b].isLeftOf=a.id,g[b].svgisLeftOf=SVG.get(a.id)),g[b].referredTo=!0))}function O(a,b){var c=a.svgid;0===b&&(a.isBelow=C);!a.inNode&&a.isBelow&&(a.inNode="t");!a.inNode&&a.isRightOf&&(a.inNode="l");if(a.isBelow)if(0===b)c.move(0,0);else{var e=a.svgisBelow;c.move(e.x(),e.y()+e.bbox().height+d.connectorLength)}if(a.isRightOf){var g=!1===l?void 0!==a.moveRight?a.moveRight:d.connectorLength:d.connectorLength;e=a.svgisRightOf;c.move(e.x()+e.bbox().width+
g,e.y())}}function t(a){var b;for(b=a;b<k.length;b+=1){var c=g[h[k[b]]];c.show=!1;c.svgid.animate().opacity(d.minOpacity);c.svgid.attr("visibility","hidden")}k.splice(a,k.length)}function P(a){var b=a.svgid,c=r.group();if(a.yes&&void 0!==a.yesid){var e=a.svgyesid;var f=g[h[a.yes]];"t"===f.inNode&&(f.inNodePos=[e.cx(),e.y()]);"b"===a.orient.yes&&(a.yesOutPos=[b.cx(),b.cy()+b.get(0).cy()],f.inNode=void 0!==f.inNode?f.inNode:"t","l"===f.inNode&&(f.inNodePos=[e.x()-d.arrowHeadHeight,e.cy()]));"r"===a.orient.yes&&
(a.yesOutPos=[b.x()+b.get(0).width(),b.cy()],f.inNode=void 0!==f.inNode?f.inNode:"l","l"===f.inNode&&(f.inNodePos=[e.x(),e.cy()]));u.push(a.yesid)}a.no&&void 0!==a.noid&&(f=g[h[a.no]],e=a.svgnoid,"b"===a.orient.no&&(a.noOutPos=[b.cx(),b.cy()+b.get(0).cy()],f.inNode=void 0!==f.inNode?f.inNode:"t",f.inNodePos=[e.cx(),e.y()]),"r"===a.orient.no&&(a.noOutPos=[b.cx()+b.get(0).cx(),b.cy()],f.inNode=void 0!==f.inNode?f.inNode:"l","t"===f.inNode&&(f.inNodePos=[e.cx(),e.y()]),"l"===f.inNode&&(f.inNodePos=[e.x(),
e.cy()])),u.push(a.noid));a.next&&(f=g[h[a.next]],"b"===a.orient.next&&(a.nextOutPos=[b.cx(),b.cy()+b.get(0).cy()],f.inNode=void 0!==f.inNode?f.inNode:"t","t"===f.inNode&&(e=a.svgnextid,f.inNodePos=[e.cx(),e.y()]),"l"===f.inNode&&(e=a.svgnoid,f.inNodePos=[e.x(),e.cy()])),"r"===a.orient.next&&(a.nextOutPos=[b.x()+b.get(0).width(),b.y()+b.get(0).cy()],f.inNode=void 0!==f.inNode?f.inNode:"l",e=a.svgnextid,"t"===f.inNode&&(f.inNodePos=[e.cx(),e.y()]),"l"===f.inNode&&(f.inNodePos=[e.x(),e.cy()])),u.push(a.nextid));
c.back();a.conngroup=c}function Q(a){var b=a.svgshape;if(a.yes&&void 0!==a.yesid){var c=g[h[a.yes]].svgshape;var e=g[h[a.yes]];"t"===e.inNode&&(e.inNodePos=[c.cx(),c.y()]);"b"===a.orient.yes&&(a.yesOutPos=[b.cx(),b.y()+b.bbox().height],e.inNode=void 0!==e.inNode?e.inNode:"t","l"===e.inNode&&(e.inNodePos=[c.x()-d.arrowHeadHeight,c.cy()]));"r"===a.orient.yes&&(a.yesOutPos=[b.x()+b.width(),b.cy()],e.inNode=void 0!==e.inNode?e.inNode:"l","l"===e.inNode&&(e.inNodePos=[c.x(),c.cy()]));u.push(a.yesid)}a.no&&
void 0!==a.noid&&(e=g[h[a.no]],c=g[h[a.no]].svgshape,"b"===a.orient.no&&(a.noOutPos=[b.cx(),b.y()+b.bbox().height],e.inNode=void 0!==e.inNode?e.inNode:"t",e.inNodePos=[c.cx(),c.y()]),"r"===a.orient.no&&(a.noOutPos=[b.x()+b.bbox().width,b.cy()],e.inNode=void 0!==e.inNode?e.inNode:"l","t"===e.inNode&&(e.inNodePos=[c.cx(),c.y()]),"l"===e.inNode&&(e.inNodePos=[c.x(),c.cy()])),u.push(a.noid));a.next&&(e=g[h[a.next]],"b"===a.orient.next&&(a.nextOutPos=[b.cx(),b.bbox().height+b.y()],e.inNode=void 0!==e.inNode?
e.inNode:"t","t"===e.inNode&&(c=g[h[a.next]].svgshape,e.inNodePos=[c.cx(),c.y()]),"l"===e.inNode&&(c=a.svgnoid,e.inNodePos=[c.x(),c.cy()])),"r"===a.orient.next&&(a.nextOutPos=[b.x()+b.bbox().width,b.cy()],e.inNode=void 0!==e.inNode?e.inNode:"l",c=g[h[a.next]].svgshape,"t"===e.inNode&&(e.inNodePos=[c.cx(),c.y()]),"l"===e.inNode&&(e.inNodePos=[c.x(),c.cy()])),u.push(a.nextid))}function R(a){var b=a.svgid;if(a.yes&&void 0!==a.yesid){var c=q(d.labelYes,b);a.yesBtn=c;c.attr("cursor","pointer");c.on("click",
function(){B(a,"yes")});"b"===a.orient.yes&&c.move(a.yesOutPos[0],a.yesOutPos[1]+d.labelNudgeBottom);"r"===a.orient.yes&&c.move(a.yesOutPos[0]+20+d.labelNudgeRight,a.yesOutPos[1]-20)}a.no&&void 0!==a.noid&&(c=q(d.labelNo,b),a.noBtn=c,c.attr("cursor","pointer"),c.on("click",function(){B(a,"no")}),"b"===a.orient.no&&c.move(a.noOutPos[0]+d.labelNudgeBottom,a.noOutPos[1]),"r"===a.orient.no&&c.move(a.noOutPos[0]+20+d.labelNudgeRight,a.noOutPos[1]-20));a.next&&void 0!==a.nextid&&(c=q(d.labelNext,b),a.nextBtn=
c,c.attr("cursor","pointer"),c.on("click",function(){B(a,"next")}),"b"===a.orient.next&&c.move(a.nextOutPos[0]+d.labelNudgeBottom,a.nextOutPos[1]),"r"===a.orient.next&&c.move(a.nextOutPos[0]+20+d.labelNudgeRight,a.nextOutPos[1]-20))}function S(a){var b=a.conngroup;if(a.yes&&void 0!==a.yesid){var c=q(d.labelYes,b);"b"===a.orient.yes&&c.move(a.yesOutPos[0],a.yesOutPos[1]);"r"===a.orient.yes&&c.move(a.yesOutPos[0]+20+d.labelNudgeRight,a.yesOutPos[1]-20)}a.no&&void 0!==a.noid&&(c=q(d.labelNo,b),"b"===
a.orient.no&&c.move(a.noOutPos[0],a.noOutPos[1]),"r"===a.orient.no&&c.move(a.noOutPos[0]+20+d.labelNudgeRight,a.noOutPos[1]-20));a.next&&void 0!==a.nextid&&(c=q(d.labelNext,b),"b"===a.orient.next&&c.move(a.nextOutPos[0],a.nextOutPos[1]),"r"===a.orient.next&&c.move(a.nextOutPos[0]+20+d.labelNudgeRight,a.nextOutPos[1]-20))}function T(a){var b=a.svgid;var c=a.svgshape.x()+a.svgshape.bbox().width+d.connectorLength-d.arrowHeadHeight;var e=a.svgshape.cy()-d.arrowHeadHeight/2;var f=a.svgshape.cx()-d.arrowHeadHeight/
2;var g=a.svgshape.y()+a.svgshape.bbox().height+d.connectorLength-d.arrowHeadHeight;if(void 0!==a.svgyesid){if("r"===a.orient.yes){var h=n(b);h.move(c,e);h.rotate(270)}"b"===a.orient.yes&&(h=n(b),h.move(f,g))}void 0!==a.svgnoid&&("r"===a.orient.no&&(h=n(b),h.move(c,e),h.rotate(270)),"b"===a.orient.no&&(h=n(b),h.move(f,g)));void 0!==a.svgnextid&&("r"===a.orient.next&&(h=n(b),h.move(c,e),h.rotate(270)),"b"===a.orient.next&&(h=n(b),h.move(f,g)))}function U(a){var b=a.conngroup;if(a.yes&&void 0!==a.yesid){var c=
n(b);var e=g[h[a.yes]];"b"===a.orient.yes&&(c.move(e.inNodePos[0]-d.arrowHeadHeight/2,e.inNodePos[1]-d.arrowHeadHeight),"l"===e.inNode&&c.rotate(270));"r"===a.orient.yes&&(c.move(e.inNodePos[0]-d.arrowHeadHeight/2,e.inNodePos[1]-d.arrowHeadHeight),"l"===e.inNode&&(c.move(e.inNodePos[0]-d.arrowHeadHeight,e.inNodePos[1]-d.arrowHeadHeight/2),c.rotate(270)))}a.no&&void 0!==a.noid&&(c=n(b),e=g[h[a.no]],"b"===a.orient.no&&c.move(e.inNodePos[0]-d.arrowHeadHeight/2,e.inNodePos[1]-d.arrowHeadHeight),"r"===
a.orient.no&&(c.move(e.inNodePos[0]-d.arrowHeadHeight,e.inNodePos[1]-d.arrowHeadHeight/2),"l"===e.inNode&&c.rotate(270),"t"===e.inNode&&c.move(e.inNodePos[0]-d.arrowHeadHeight/2,e.inNodePos[1]-d.arrowHeadHeight)));a.next&&void 0!==a.nextid&&(c=n(b),e=g[h[a.next]],"b"===a.orient.next&&(c.move(e.inNodePos[0]-d.arrowHeadHeight/2,e.inNodePos[1]-d.arrowHeadHeight),"l"===e.inNode&&c.rotate(270)),"r"===a.orient.next&&(c.move(e.inNodePos[0]-d.arrowHeadHeight,e.inNodePos[1]-d.arrowHeadHeight/2),c.rotate(270)))}
function v(a,b,c,e){var f=c.svgshape;var g=2*d.arrowHeadHeight;c=[b[0],b[1]-d.arrowHeadHeight];if(a[1]===f.y()+f.height()){e=[a[0],a[1]+g];if(b[1]>a[1]){e=[a[0],b[1]-g];var h=[b[0],b[1]-g]}b[0]<a[0]&&(h=[b[0],b[1]-g]);b[1]<=a[1]&&(h=[b[0],b[1]+g]);c=[b[0],b[1]-d.arrowHeadHeight];return[a,e,h,c]}if(a[0]<b[0]&&a[1]>b[1])return e=[a[0]+g,a[1]],h=[a[0]+g,b[1]-g],f=[b[0],b[1]-g],c=[b[0],b[1]-d.arrowHeadHeight],[a,e,h,f,c];if(a[0]>b[0]&&a[1]<b[1])return e=[a[0]+g,a[1]],h=[a[0]+g,b[1]-d.shapeHeight/2-g],
f=[b[0]-g,b[1]-d.shapeHeight/2-g],g=[b[0]-g,b[1]],c=[b[0],b[1]-d.arrowHeadHeight],[a,e,h,f,g,c];if(a[0]>b[0]&&a[1]>b[1])return e=[a[0],a[1]+g],h=[a[0]-d.shapeWidth/2-d.connectorLength/2,a[1]+g],f=[a[0]-d.shapeWidth/2-d.connectorLength/2,b[1]-g],g=[b[0],b[1]-g],c=[b[0],b[1]-d.arrowHeadHeight],[a,e,h,f,g,c];if(a[0]<b[0]&&a[1]<b[1]){if(b[1]>SVG.get(e).y())return e=[a[0]+g/2,a[1]],h=[a[0]+g/2,b[1]],c=[b[0]-d.arrowHeadHeight,b[1]],[a,e,h,c];if(b[1]===SVG.get(e).y())return e=[b[0],a[1]],c=[b[0],b[1]-d.arrowHeadHeight],
[a,e,c]}a[1]<b[1]?c=[b[0],b[1]-d.arrowHeadHeight]:a[0]<b[0]&&(c=[b[0]-d.arrowHeadHeight,b[1]]);return[a,c]}function V(a){var b;if(a.yesid){var c=a.yesOutPos;"b"===a.orient.yes&&(b=[c[0],c[1]+d.connectorLength]);"r"===a.orient.yes&&(b=[c[0]+d.connectorLength,c[1]]);a.svgid.polyline(v(c,b,a)).stroke({width:d.connectorStrokeWidth,color:d.connectorStrokeColour}).fill("none")}a.noid&&(c=a.noOutPos,"b"===a.orient.no&&(b=[c[0],c[1]+d.connectorLength]),"r"===a.orient.no&&(b=[c[0]+d.connectorLength,c[1]]),
a.svgid.polyline(v(c,b,a)).stroke({width:d.connectorStrokeWidth,color:d.connectorStrokeColour}).fill("none"));a.nextid&&(c=a.nextOutPos,"b"===a.orient.next&&(b=[c[0],c[1]+d.connectorLength]),"r"===a.orient.next&&(b=[c[0]+d.connectorLength,c[1]]),void 0===b&&(b=g[h[a.next]].yesOutPos),a.svgid.polyline(v(c,b,a)).stroke({width:d.connectorStrokeWidth,color:d.connectorStrokeColour}).fill("none"))}function W(a){if(a.yesid){var b=a.yesOutPos;var c=g[h[a.yes]].inNodePos;a.conngroup.polyline(v(b,c,a,a.yesid)).stroke({width:d.connectorStrokeWidth,
color:d.connectorStrokeColour}).fill("none")}a.noid&&(b=a.noOutPos,c=g[h[a.no]].inNodePos,a.conngroup.polyline(v(b,c,a,a.noid)).stroke({width:d.connectorStrokeWidth,color:d.connectorStrokeColour}).fill("none"));a.nextid&&(b=a.nextOutPos,c=g[h[a.next]].inNodePos,void 0===c&&(c=g[h[a.next]].yesOutPos),a.conngroup.polyline(v(b,c,a,a.nextid)).stroke({width:d.connectorStrokeWidth,color:d.connectorStrokeColour}).fill("none"))}function X(a){a.referredTo=!1}var m,y,w,d,f={},g,l=!0,r,p={},x,C,h={},u=[],k=
[],E=!0,F=!0,G;var D={decision:function(a){var b=r.group();var c=b.polygon("0,"+d.decisionHeight/2+" "+d.decisionWidth/2+",0 "+d.decisionWidth+","+d.decisionHeight/2+" "+d.decisionWidth/2+","+d.decisionHeight).attr({fill:d.decisionFill,"class":"fc-rhombus"});b.attr("class","fc-decision");var e=b.text(function(b){a.text.forEach(function(a){b.tspan(a).newLine().attr("text-anchor","middle")})});e.fill(d.decisionTextColour).font({size:d.decisionFontSize});e.cx(c.cx()+e.bbox().width+e.bbox().x);e.cy(c.cy());
return b},finish:function(a){var b,c,e=r.group().attr({"class":"finish-group"}),f=e.rect(d.finishWidth,d.finishHeight).attr({fill:d.finishFill,stroke:d.tipStrokeColour,"class":"fc-finish"}).radius(20),g=e.group();g.text(function(b){a.text.forEach(function(a){b.tspan(a).newLine()})}).fill(d.finishTextColour).font({size:d.finishFontSize});a.links&&a.links.forEach(function(a){var b=m.link(a.url),c=m.text(a.text);b.add(c);a.target&&b.target(a.target);c.fill(d.finishLinkColour).font({size:d.finishFontSize});
a=g.bbox();c.dmove(0,a.height+5);g.add(b)});if(a.tip){var h=e.text(a.tip.title).fill(d.finishLinkColour).font({size:d.finishFontSize}).attr("cursor","pointer");h.move(d.finishLeftMargin,f.height()-25);h.on("mouseover",function(){b=e.group();c=e.text(function(b){a.tip.text.forEach(function(a){b.tspan(a).newLine()})}).font({size:d.tipFontSize}).move(d.tipMarginLeft,d.tipMarginTop);b.rect(d.shapeWidth-d.finishLeftMargin,c.bbox().height+2*d.tipMarginTop).attr({fill:d.tipFill,stroke:d.tipStrokeColour,
"class":"fc-tip"});b.add(c);b.x(d.finishLeftMargin/2);b.bbox();var g=f.height()-b.bbox().height-30;b.y(g)}).on("mouseout",function(){b.remove()})}g.move(d.finishLeftMargin,(f.height()-g.bbox().height)/2-5);return e},process:function(a){var b,c,e=r.group().attr({"class":"process-group"}),f=e.rect(d.processWidth,d.processHeight).attr({fill:d.processFill,stroke:d.processStrokeColour,"class":"fc-process "+a["class"]}),g=e.group();g.text(function(b){a.text.forEach(function(a){b.tspan(a).newLine()})}).font({size:d.processFontSize});
a.links&&a.links.forEach(function(a){var b=m.link(a.url),c=m.text(a.text);b.add(c);a.target&&b.target(a.target);c.fill(d.processLinkColour).font({size:d.processFontSize});a=g.bbox();c.dmove(0,a.height+5);g.add(b)});if(a.tip){var h=e.text(a.tip.title).fill(d.finishLinkColour).font({size:d.finishFontSize}).attr("cursor","pointer");h.move(d.finishLeftMargin,f.height()-25);h.on("mouseover",function(){b=e.group();c=e.text(function(b){a.tip.text.forEach(function(a){b.tspan(a).newLine()})}).font({size:d.tipFontSize}).move(d.tipMarginLeft,
d.tipMarginTop);b.rect(d.shapeWidth-d.finishLeftMargin,c.bbox().height+2*d.tipMarginTop).attr({fill:d.tipFill,stroke:d.tipStrokeColour,"class":"process-tip"});b.add(c);b.x(d.finishLeftMargin/2);b.bbox();var g=f.height()-b.bbox().height-30;b.y(g)}).on("mouseout",function(){b.remove()})}g.move(d.finishLeftMargin,(f.height()-g.bbox().height)/2-5);return e}};var B=function(a,b){if("yes"===b){if(!0===g[h[a.yes]].show&&!1===g[h[a.no]].show){var c=k.indexOf(a.yes);t(c);return}c=k.indexOf(a.no);-1<c&&t(c);
-1===k.indexOf(a.yes)&&k.push(a.yes);"b"===a.orient.yes&&(a.svgyesid.move(a.svgid.x(),a.svgid.y()+a.svgid.bbox().height),void 0!==g[h[a.yes]].svgnextid&&g[h[a.yes]].svgnextid.move(a.svgyesid.x(),a.svgyesid.bbox().y+a.svgyesid.bbox().height));"r"===a.orient.yes&&(a.svgyesid.move(a.svgid.x()+a.svgid.bbox().width,a.svgid.y()),void 0!==g[h[a.yes]].svgnextid&&g[h[a.yes]].svgnextid.move(a.svgyesid.x(),a.svgyesid.bbox().y+a.svgyesid.bbox().height));a.svgyesid.animate().opacity(d.maxOpacity);var e=a.yesid;
a.svgyesid.attr("visibility","visible");g[h[a.yes]].show=!0;g[h[a.no]].svgid.animate().opacity(d.minOpacity);g[h[a.no]].svgid.attr("visibility","hidden");g[h[a.no]].show=!1}if("no"===b){if(!0===g[h[a.no]].show){c=k.indexOf(a.no);t(c);return}c=k.indexOf(a.yes);-1<c&&t(c);-1===k.indexOf(a.no)&&k.push(a.no);"b"===a.orient.no&&(a.svgnoid.move(a.svgid.x(),a.svgid.y()+a.svgid.bbox().height),void 0!==g[h[a.no]].svgnextid&&g[h[a.no]].svgnextid.move(a.svgnoid.x(),a.svgnoid.bbox().y+a.svgnoid.bbox().height));
"r"===a.orient.no&&(a.svgnoid.move(a.svgid.x()+a.svgid.bbox().width,a.svgid.y()),void 0!==g[h[a.no]].svgnextid&&g[h[a.no]].svgnextid.move(a.svgnoid.x(),a.svgnoid.bbox().y+a.svgnoid.bbox().height));a.svgnoid.animate().opacity(d.maxOpacity);e=a.noid;a.svgnoid.attr("visibility","visible");g[h[a.no]].show=!0}if("next"===b){if(!0===g[h[a.next]].show){c=k.indexOf(a.next);t(c);return}c=k.indexOf(a.next);-1<c&&t(c);-1===k.indexOf(a.next)&&k.push(a.next);"b"===a.orient.next&&(a.svgnextid.move(a.svgid.x(),
a.svgid.y()+a.svgid.bbox().height),void 0!==g[h[a.next]].svgnextid&&g[h[a.next]].svgnextid.move(a.svgnextid.x(),a.svgnextid.bbox().y+a.svgnextid.bbox().height));"r"===a.orient.next&&(a.svgnextid.move(a.svgid.x()+a.svgid.bbox().width,a.svgid.y()),void 0!==g[h[a.next]].svgnextid&&g[h[a.next]].svgnextid.move(a.svgnextid.x(),a.svgnextid.bbox().y+a.svgnextid.bbox().height));a.svgnextid.animate().opacity(d.maxOpacity);e=a.nextid;a.svgnextid.attr("visibility","visible");g[h[a.next]].show=!0}if(!0===F){c=
window.innerHeight;var f=m.attr("id");f=document.getElementById(f);var l=document.getElementById(e);e=SVG.get(e).bbox();var n=f.createSVGPoint();l=l.getCTM();f=n.matrixTransform(l).y+e.height+f.parentNode.offsetTop+20+G;f>c&&(window.jQuery&&window.jQuery.scrollTo?jQuery.scrollTo(f-c,1E3):window.scrollTo(0,f-c))}};var A=function(a){g=a;g.forEach(X);var b;a=f.w||210;var c=f.h||150,e=f.arrowColour||"grey",k=f.defaultFontSize||12;d={showButtons:f.showButtons||!0,minOpacity:f.minOpacity||0,maxOpacity:f.maxOpacity||
1,btnBarHeight:f.btnBarHeight||40,btnBarSelectedColour:f.btnBarSelectedColour||"black",btnBarHoverColour:f.btnBarHoverColour||"dimgrey",btnBarFontSize:f.btnBarFontSize||k,btnBarRadius:f.btnBarRadius||10,shapeWidth:f.shapeWidth||a,shapeHeight:f.shapeHeight||c,connectorLength:f.connectorLength||80,startWidth:f.startWidth||a,startHeight:f.startHeight||40,startCornerRadius:f.startCornerRadius||20,startFill:f.startFill||e,startStrokeWidth:f.startStrokeWidth||.1,startStrokeColour:f.startStrokeColour||"rgb(66, 66, 66)",
startTextColour:f.startTextColour||"#fff",startText:f.startText||"Start",startFontSize:f.startFontSize||k,decisionWidth:f.decisionWidth||f.w||a,decisionHeight:f.decisionHeight||f.h||c,decisionFill:f.decisionFill||"#8b3572",decisionTextColour:f.decisionTextColour||"#fff",decisionFontSize:f.decisionFontSize||k,finishTextColour:f.finishTextColour||"#fff",finishWidth:f.finishWidth||a,finishHeight:f.finishHeight||c,finishLeftMargin:f.finishLeftMargin||20,finishFill:f.finishFill||"#0F6C7E",finishFontSize:f.finishFontSize||
k,finishLinkColour:f.finishLinkColour||"DodgerBlue",processWidth:f.processWidth||a,processHeight:f.processHeight||c,processLeftMargin:f.processLeftMargin||20,processFill:f.processFill||"#fff",processStrokeColour:f.processStrokeColour||"rgb(66, 66, 66)",processStrokeWidth:f.processStrokeWidth||.1,processTextColour:f.processTextColour||"rgb(51, 51, 51)",processFontSize:f.processFontSize||k,processLinkColour:f.processLinkColour||"darkblue",labelWidth:f.labelWidth||30,labelHeight:f.labelHeight||20,labelRadius:f.labelRadius||
5,labelStroke:f.labelStroke||.1,labelFill:f.labelFill||e,labelOpacity:f.labelOpacity||1,labelFontSize:f.labelFontSize||k,labelTextColour:f.labelTextColour||"#fff",labelYes:f.labelYes||"Yes",labelNo:f.labelNo||"No",labelNext:f.labelNext||"Next",labelNudgeRight:f.labelNudgeRight||0,labelNudgeBottom:f.labelNudgeBottom||0,arrowHeadHeight:f.arrowHeadHeight||20,arrowHeadColor:f.arrowHeadColor||e,arrowHeadOpacity:f.arrowHeadOpacity||1,connectorStrokeWidth:f.connectorStrokeWidth||1.5,connectorStrokeColour:f.connectorStrokeColour||
e,tipStrokeColour:f.tipStrokeColour||"rgb(66, 66, 66)",tipStrokeWidth:f.tipStrokeWidth||.1,tipFill:f.tipFill||"#fff",tipFontSize:f.tipFontSize||k,tipMarginTop:f.tipMarginTop||10,tipMarginLeft:f.tipMarginLeft||10};!0===E&&(b=K());x=I(g);void 0!==b&&x.y(b.bbox().height+10);r.y(x.y()+x.bbox().height);g.forEach(L);g.forEach(M);for(w=0;w<g.length;w+=1)h[g[w].label]=w;g.forEach(N);g.forEach(O);!0===l&&(g.forEach(Q),g.forEach(V),g.forEach(R),g.forEach(T));!1===l&&(g.forEach(P),g.forEach(W),g.forEach(S),
g.forEach(U))};return{config:function(a){f=a;l=void 0!==f.interactive?f.interactive:!0;E=void 0!==f.showButtons?f.showButtons:!0;F=void 0!==f.scrollto?f.scrollto:!0;G=void 0!==f.scrollOffset?f.scrollOffset:0},draw:z,shapes:A}}();